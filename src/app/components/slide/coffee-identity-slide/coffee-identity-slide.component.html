<div class="slide-inner">
  <app-slider-title
    [title]="'coffeeIdentityTitle' | translate"
    [subtitle]="'coffeeIdentitySubtitle' | translate"
  ></app-slider-title>

  <form class="form-content">
    <!-- Marca -->
    <div
      class="form-field fade-in"
      [class.invalid]="shouldShowBrandError()"
      style="animation-delay: 0s"
    >
      <label for="brand">{{ 'brandLabel' | translate }}</label>
      <input
        type="text"
        id="brand"
        [value]="coffeeData().brand"
        (input)="updateField('brand', $any($event.target).value)"
        (blur)="brandTouched.set(true)"
        [placeholder]="'brandPlaceholder' | translate"
        [attr.aria-label]="'coffeeBrandAriaLabel' | translate"
        [class.input-invalid]="shouldShowBrandError()"
        maxlength="50"
      />
      @if (shouldShowBrandError()) {
      <span class="validation-message">{{ 'brandError' | translate }}</span>
      }
    </div>

    <!-- Nombre del CafÃ© -->
    <div
      class="form-field fade-in"
      [class.invalid]="shouldShowCoffeeNameError()"
      style="animation-delay: 0.1s"
    >
      <label for="coffeeName">{{ 'coffeeNameLabel' | translate }}</label>
      <input
        type="text"
        id="coffeeName"
        [value]="coffeeData().coffeeName"
        (input)="updateField('coffeeName', $any($event.target).value)"
        (blur)="coffeeNameTouched.set(true)"
        [placeholder]="'coffeeNamePlaceholder' | translate"
        [attr.aria-label]="'coffeeNameAriaLabel' | translate"
        [class.input-invalid]="shouldShowCoffeeNameError()"
        maxlength="50"
      />
      @if (shouldShowCoffeeNameError()) {
      <span class="validation-message">{{ 'coffeeNameError' | translate }}</span>
      }
    </div>

    <!-- Tipo de Grano -->
    <div
      class="form-field fade-in"
      [class.invalid]="shouldShowBeanTypeError()"
      style="animation-delay: 0.2s"
    >
      <label>{{ 'beanTypeLabel' | translate }}</label>
      <div class="chips-container" [class.chips-invalid]="shouldShowBeanTypeError()">
        @for (type of beanTypes(); track type) {
        <button
          type="button"
          class="chip"
          [class.chip-selected]="coffeeData().beanType === type"
          (click)="updateField('beanType', type)"
          [attr.aria-label]="'Seleccionar ' + (type | translate)"
          [attr.aria-pressed]="coffeeData().beanType === type"
        >
          {{ type | translate }}
        </button>
        }
      </div>
      @if (shouldShowBeanTypeError()) {
      <span class="validation-message">{{ 'beanTypeError' | translate }}</span>
      }
    </div>

    <!-- Origen -->
    <div
      class="form-field fade-in"
      [class.invalid]="shouldShowOriginError()"
      style="animation-delay: 0.3s"
    >
      <label for="origin">{{ 'originLabel' | translate }}</label>
      <div
        class="origin-input-wrapper"
        [class.flag-visible]="countryCode"
        [class.has-flag]="countryCode"
      >
        @if (countryCode) {
        <span class="detected-flag fi" [ngClass]="'fi-' + countryCode"></span>
        }
        <input
          type="text"
          id="origin"
          [value]="coffeeData().origin"
          (input)="onOriginInput($any($event.target).value)"
          (blur)="originTouched.set(true)"
          [placeholder]="'originPlaceholder' | translate"
          [attr.aria-label]="'coffeeOriginAriaLabel' | translate"
          [class.flag-detected]="showFlagAnimation"
          [class.input-invalid]="shouldShowOriginError()"
          maxlength="50"
        />
      </div>
      @if (shouldShowOriginError()) {
      <span class="validation-message">{{ 'originError' | translate }}</span>
      }
    </div>
  </form>
</div>
