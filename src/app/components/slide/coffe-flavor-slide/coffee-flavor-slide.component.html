<div class="sensory-slide">
  <app-slider-title
    [title]="'flavorExperienceTitle' | translate"
    [subtitle]="'flavorExperienceSubtitle' | translate"
  ></app-slider-title>
  <!-- Acidity Section -->
  <div class="sensory-section">
    <div class="section-header" [class.invalid]="shouldShowAcidityError()">
      <span class="section-title">{{ 'acidityLabel' | translate }}</span>
      <span class="section-description">{{ 'acidityDescription' | translate }}</span>
    </div>
    <div class="slider-container" [class.container-invalid]="shouldShowAcidityError()">
      <!-- Slider Labels -->
      <div class="slider-labels">
        @for (level of acidityLevels(); track level.value) {
        <span class="slider-label-text" [class.active]="flavorData().acidity === level.value">
          {{ level.label | translate }}
        </span>
        }
      </div>

      <!-- Slider Input -->
      <input
        type="range"
        class="sensory-slider"
        min="0"
        [max]="acidityLevels().length - 1"
        [value]="getCurrentAcidityIndex()"
        (input)="onAciditySliderChange($any($event.target).value)"
        (blur)="acidityTouched.set(true)"
        [style.--slider-color]="getCurrentAcidityColor()"
      />

      <!-- Visual Indicator -->
      <div class="slider-indicator" [style.background-color]="getCurrentAcidityColor()">
        <span class="slider-emoji">{{ getCurrentAcidityIcon() }}</span>
        <span class="slider-text">{{ getCurrentAcidityDescription() | translate }}</span>
      </div>
    </div>
    @if (shouldShowAcidityError()) {
    <span class="validation-message">{{ 'acidityError' | translate }}</span>
    }
  </div>
  <!-- Aftertaste textarea -->
  <div class="sensory-section">
    <div class="section-header">
      <span class="section-title">{{ 'aftertasteLabel' | translate }}</span>
      <span class="section-description">{{ 'aftertasteDescription' | translate }}</span>
    </div>

    <div class="text-input-container">
      <textarea
        class="sensory-textarea"
        [placeholder]="'aftertasteDescPlaceholder' | translate"
        [value]="flavorData().aftertasteDescription"
        (input)="onAfterTasteDescChange($any($event.target).value)"
        rows="2"
        maxlength="200"
      ></textarea>
    </div>
  </div>
  <!-- Aftertaste Section -->
  <div class="sensory-section">
    <div class="section-header" [class.invalid]="shouldShowAftertasteError()">
      <span class="section-title">{{ 'aftertasteLabel' | translate }}</span>
      <span class="section-description">{{ 'aftertasteDescription' | translate }}</span>
    </div>
    <div class="slider-container" [class.container-invalid]="shouldShowAftertasteError()">
      <!-- Slider Labels -->
      <div class="slider-labels">
        @for (level of afterTasteLevels(); track level.value) {
        <span class="slider-label-text" [class.active]="flavorData().aftertaste === level.value">
          {{ level.label | translate }}
        </span>
        }
      </div>

      <!-- Slider Input -->
      <input
        type="range"
        class="sensory-slider"
        min="0"
        [max]="afterTasteLevels().length - 1"
        [value]="getCurrentAftertasteIndex()"
        (input)="onAftertasteSliderChange($any($event.target).value)"
        (blur)="aftertasteTouched.set(true)"
        [style.--slider-color]="getCurrentAftertasteColor()"
      />

      <!-- Visual Indicator -->
      <div class="slider-indicator" [style.background-color]="getCurrentAftertasteColor()">
        <span class="slider-emoji">{{ getCurrentAftertasteIcon() }}</span>
        <span class="slider-text">{{ getCurrentAftertasteDescription() | translate }}</span>
      </div>
    </div>
    @if (shouldShowAftertasteError()) {
    <span class="validation-message">{{ 'aftertasteError' | translate }}</span>
    }
  </div>
</div>
