<div class="slide-inner">
  <app-slider-title
    title="🌰 Tueste y Preparación"
    subtitle="Las bases de la extracción perfecta."
  ></app-slider-title>

  <form class="form-content">
    <!-- Nivel de Tueste -->
    <div class="form-field fade-in" [class.invalid]="shouldShowRoastLevelError()" style="animation-delay: 0.1s">
      <label>Nivel de Tueste</label>

      <div class="roast-slider-container" [class.container-invalid]="shouldShowRoastLevelError()">
        <!-- Slider Labels -->
        <div class="roast-labels">
          @for (level of roastLevels(); track level.value) {
          <span class="roast-label-text" [class.active]="coffeeData().roastLevel === level.value">
            {{ level.label }}
          </span>
          }
        </div>

        <!-- Slider Input -->
        <input
          type="range"
          class="roast-slider"
          min="0"
          [max]="roastLevels().length - 1"
          [value]="getCurrentRoastIndex()"
          (input)="onSliderChange($any($event.target).value)"
          (blur)="roastLevelTouched.set(true)"
          [style.--slider-color]="getCurrentRoastColor()"
        />

        <!-- Visual Indicator -->
        <div class="roast-indicator" [style.background-color]="getCurrentRoastColor()">
          <span class="roast-emoji">{{ getCurrentRoastEmoji() }}</span>
        </div>
      </div>
      @if (shouldShowRoastLevelError()) {
        <span class="validation-message">Debes seleccionar un nivel de tueste</span>
      }
    </div>

    <!-- Método de Preparación -->
    <div class="form-field fade-in" [class.invalid]="shouldShowBrewMethodError()" style="animation-delay: 0.2s">
      <label>Método de preparación</label>
      <div class="brew-methods" [class.brew-methods-invalid]="shouldShowBrewMethodError()" role="group" aria-label="Métodos de preparación">
        @for (method of brewMethodsOptions(); track method.name) {
        <button
          type="button"
          class="brew-chip"
          [attr.aria-pressed]="isBrewMethodSelected(method.name)"
          [class.selected]="isBrewMethodSelected(method.name)"
          (click)="selectBrewMethod(method.name)"
        >
          <img [src]="method.image" [alt]="method.name" class="brew-icon" />
          <span>{{ method.name }}</span>
        </button>
        }
      </div>
      @if (shouldShowBrewMethodError()) {
        <span class="validation-message">Debes seleccionar un método de preparación</span>
      }
    </div>
  </form>
</div>
